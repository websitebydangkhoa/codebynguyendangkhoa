const a0_0x4688b1=a0_0x2fb9;function a0_0x188a(){const _0x24989b=['prefix','9046PmXvLO','Upload\x20ảnh\x20thất\x20bại','onload','Settings\x20is\x20required\x20and\x20must\x20be\x20an\x20object','status','/birthday-websites/website/','removeItem','message','HTTP\x20error!\x20status:\x20','10FkvNRc','startsWith','websiteId','enableBook','readAsDataURL','text','baseURL','fileToBase64','344rIKECs','onerror','application/json','createShareableURL','split','POST','url','https://dearlove-backend.onrender.com/api/r2/upload','pages','uploadImageToR2','blob','15OPGdoi','origin','209489FlCAsd','search','2534316WJCjTs','error','object','8891703tMnneV','11051843txBOJC','json','874484QgneeE','birthdayWebsiteId','pathname','https://dearlove-backend.onrender.com/api/birthday','location','/birthday-websites','setItem','6aSvvtS','match','getCurrentWebsiteId','append','success','file','❌\x20[BOOK\x20ENABLED]\x20Error\x20uploading\x20page\x20images:','push','result','onloadend','image','Không\x20thể\x20tạo\x20website','length','20512212tqvfAc','files','birthday','❌\x20[API\x20GET\x20ERROR]\x20API\x20returned\x20success=false:','pageImage','getBirthdayWebsiteByWebsiteId','data','blob:','currentWebsiteId','uploadPagesImages','upload.png','Free','clearWebsiteId','316XgYhab','Không\x20tìm\x20thấy\x20website','getItem','processFileInputImages','birthdayAPI'];a0_0x188a=function(){return _0x24989b;};return a0_0x188a();}function a0_0x2fb9(_0x12cea4,_0x402dfd){const _0x188a12=a0_0x188a();return a0_0x2fb9=function(_0x2fb9ff,_0x29a570){_0x2fb9ff=_0x2fb9ff-0x1ce;let _0x232ee7=_0x188a12[_0x2fb9ff];return _0x232ee7;},a0_0x2fb9(_0x12cea4,_0x402dfd);}(function(_0x440f7a,_0x111ad4){const _0x59034d=a0_0x2fb9,_0x4e88c0=_0x440f7a();while(!![]){try{const _0x216ef5=-parseInt(_0x59034d(0x1cf))/0x1*(-parseInt(_0x59034d(0x216))/0x2)+-parseInt(_0x59034d(0x1fc))/0x3*(-parseInt(_0x59034d(0x1f5))/0x4)+-parseInt(_0x59034d(0x1eb))/0x5*(-parseInt(_0x59034d(0x1ef))/0x6)+parseInt(_0x59034d(0x1ed))/0x7*(parseInt(_0x59034d(0x1e0))/0x8)+-parseInt(_0x59034d(0x1f2))/0x9+-parseInt(_0x59034d(0x1d8))/0xa*(parseInt(_0x59034d(0x1f3))/0xb)+-parseInt(_0x59034d(0x209))/0xc;if(_0x216ef5===_0x111ad4)break;else _0x4e88c0['push'](_0x4e88c0['shift']());}catch(_0xb95f07){_0x4e88c0['push'](_0x4e88c0['shift']());}}}(a0_0x188a,0xaf6a2));class BirthdayAPI{constructor(){const _0x1fd892=a0_0x2fb9;this[_0x1fd892(0x1de)]=_0x1fd892(0x1f8),this[_0x1fd892(0x211)]=null;}async[a0_0x4688b1(0x1e9)](_0x5c6952,_0x121edf=a0_0x4688b1(0x20b)){const _0x162d51=a0_0x4688b1;try{function _0x259016(_0x3b5c66,_0x492de7){const _0x424af8=a0_0x2fb9,_0x5c4aaf=_0x3b5c66[_0x424af8(0x1e4)](','),_0x37534c=_0x5c4aaf[0x0][_0x424af8(0x1fd)](/:(.*?);/)[0x1],_0x2a2b14=atob(_0x5c4aaf[0x1]);let _0x2cfa7f=_0x2a2b14[_0x424af8(0x208)];const _0x28df9b=new Uint8Array(_0x2cfa7f);while(_0x2cfa7f--){_0x28df9b[_0x2cfa7f]=_0x2a2b14['charCodeAt'](_0x2cfa7f);}return new File([_0x28df9b],_0x492de7,{'type':_0x37534c});}const _0x285e2b=_0x259016(_0x5c6952,_0x162d51(0x213)),_0x3ff245=new FormData();_0x3ff245[_0x162d51(0x1ff)](_0x162d51(0x201),_0x285e2b);_0x121edf&&_0x3ff245[_0x162d51(0x1ff)](_0x162d51(0x1ce),_0x121edf);const _0x232756=await fetch(_0x162d51(0x1e7),{'method':_0x162d51(0x1e5),'body':_0x3ff245}),_0x579e50=await _0x232756[_0x162d51(0x1f4)]();if(_0x579e50[_0x162d51(0x200)]&&_0x579e50[_0x162d51(0x20f)]&&_0x579e50[_0x162d51(0x20f)][_0x162d51(0x1e6)])return _0x579e50[_0x162d51(0x20f)]['url'];throw new Error(_0x162d51(0x1d0));}catch(_0x4bc641){throw _0x4bc641;}}async[a0_0x4688b1(0x1df)](_0x3b3bb3){return new Promise((_0x5844ea,_0x45ad9c)=>{const _0x5f3d71=a0_0x2fb9,_0x1648ea=new FileReader();_0x1648ea[_0x5f3d71(0x1d1)]=()=>_0x5844ea(_0x1648ea[_0x5f3d71(0x204)]),_0x1648ea[_0x5f3d71(0x1e1)]=_0x4f3a0c=>_0x45ad9c(_0x4f3a0c),_0x1648ea[_0x5f3d71(0x1dc)](_0x3b3bb3);});}async[a0_0x4688b1(0x212)](_0xe9dee7){const _0x5d26e0=a0_0x4688b1;try{const _0x2868d6=[];for(let _0x57641f=0x0;_0x57641f<_0xe9dee7[_0x5d26e0(0x208)];_0x57641f++){const _0x2ef745=_0xe9dee7[_0x57641f],_0xb5eb50={..._0x2ef745};if(_0x2ef745[_0x5d26e0(0x206)]){if(_0x2ef745[_0x5d26e0(0x206)][_0x5d26e0(0x1d9)](_0x5d26e0(0x210))){const _0x745c9b=await fetch(_0x2ef745['image']),_0x670988=await _0x745c9b[_0x5d26e0(0x1ea)](),_0x15ab20=await new Promise((_0x1e4ef5,_0x1bb6fd)=>{const _0x452a0d=_0x5d26e0,_0x3a3b85=new FileReader();_0x3a3b85['onloadend']=()=>_0x1e4ef5(_0x3a3b85[_0x452a0d(0x204)]),_0x3a3b85[_0x452a0d(0x1e1)]=_0x1bb6fd,_0x3a3b85[_0x452a0d(0x1dc)](_0x670988);}),_0xe2549b=await this[_0x5d26e0(0x1e9)](_0x15ab20,_0x5d26e0(0x20b));_0xb5eb50[_0x5d26e0(0x206)]=_0xe2549b;}else{if(_0x2ef745[_0x5d26e0(0x206)]['startsWith']('data:')){const _0x119468=await this['uploadImageToR2'](_0x2ef745[_0x5d26e0(0x206)],_0x5d26e0(0x20b));_0xb5eb50[_0x5d26e0(0x206)]=_0x119468;}else _0xb5eb50['image']=_0x2ef745[_0x5d26e0(0x206)];}}_0x2868d6['push'](_0xb5eb50);}return _0x2868d6;}catch(_0x3f81fa){throw _0x3f81fa;}}async[a0_0x4688b1(0x219)](_0x570e7c){const _0x140beb=a0_0x4688b1;try{const _0x33fccf=[];for(let _0x10d934=0x0;_0x10d934<_0x570e7c['length'];_0x10d934++){const _0x560268=_0x570e7c[_0x10d934],_0xbaa254={..._0x560268},_0x3de07f=document['getElementById'](_0x140beb(0x20d)+_0x10d934);if(_0x3de07f&&_0x3de07f[_0x140beb(0x20a)][_0x140beb(0x208)]>0x0){const _0x2731c9=_0x3de07f[_0x140beb(0x20a)][0x0],_0x40742f=await this[_0x140beb(0x1df)](_0x2731c9),_0x48a1fa=await this[_0x140beb(0x1e9)](_0x40742f,_0x140beb(0x20b));_0xbaa254[_0x140beb(0x206)]=_0x48a1fa;}else{if(_0x560268['image']&&(_0x560268[_0x140beb(0x206)][_0x140beb(0x1d9)](_0x140beb(0x210))||_0x560268['image'][_0x140beb(0x1d9)]('data:'))){let _0x18b6e1=_0x560268[_0x140beb(0x206)];if(_0x560268[_0x140beb(0x206)]['startsWith'](_0x140beb(0x210))){const _0x11385d=await fetch(_0x560268[_0x140beb(0x206)]),_0x1374e7=await _0x11385d[_0x140beb(0x1ea)]();_0x18b6e1=await new Promise((_0x448ccb,_0x22b54c)=>{const _0x8f7452=_0x140beb,_0x64116=new FileReader();_0x64116[_0x8f7452(0x205)]=()=>_0x448ccb(_0x64116[_0x8f7452(0x204)]),_0x64116[_0x8f7452(0x1e1)]=_0x22b54c,_0x64116['readAsDataURL'](_0x1374e7);});}const _0x4b8a84=await this[_0x140beb(0x1e9)](_0x18b6e1,_0x140beb(0x20b));_0xbaa254[_0x140beb(0x206)]=_0x4b8a84;}}_0x33fccf[_0x140beb(0x203)](_0xbaa254);}return _0x33fccf;}catch(_0x3afb90){throw _0x3afb90;}}async['createBirthdayWebsite'](_0x176921,_0x4307f8=a0_0x4688b1(0x214)){const _0x16070f=a0_0x4688b1;try{if(!_0x176921||typeof _0x176921!==_0x16070f(0x1f1))throw new Error(_0x16070f(0x1d2));const _0x2c59ef={..._0x176921};if(_0x2c59ef[_0x16070f(0x1db)]&&_0x2c59ef['pages']&&_0x2c59ef[_0x16070f(0x1e8)][_0x16070f(0x208)]>0x0)try{const _0x1b1254=await this[_0x16070f(0x219)](_0x2c59ef[_0x16070f(0x1e8)]),_0x5677e3=await this[_0x16070f(0x212)](_0x1b1254);_0x2c59ef['pages']=_0x5677e3;}catch(_0x58a525){console[_0x16070f(0x1f0)](_0x16070f(0x202),_0x58a525);throw new Error('Không\x20thể\x20upload\x20ảnh\x20trang\x20sách:\x20'+_0x58a525[_0x16070f(0x1d6)]);}else{}const _0xdc22b1={'settings':_0x2c59ef,'status':_0x4307f8},_0x43408b=await fetch(this[_0x16070f(0x1de)]+_0x16070f(0x1fa),{'method':'POST','headers':{'Content-Type':_0x16070f(0x1e2)},'body':JSON['stringify'](_0xdc22b1)});if(!_0x43408b['ok']){const _0x28f655=await _0x43408b[_0x16070f(0x1dd)]();throw new Error('HTTP\x20error!\x20status:\x20'+_0x43408b['status']+',\x20message:\x20'+_0x28f655);}const _0x3a0273=await _0x43408b[_0x16070f(0x1f4)]();if(_0x3a0273[_0x16070f(0x200)])return this[_0x16070f(0x211)]=_0x3a0273[_0x16070f(0x20f)][_0x16070f(0x1da)],localStorage[_0x16070f(0x1fb)](_0x16070f(0x1f6),this[_0x16070f(0x211)]),{'success':!![],'data':_0x3a0273[_0x16070f(0x20f)],'websiteId':this[_0x16070f(0x211)]};else throw new Error(_0x3a0273[_0x16070f(0x1d6)]||_0x16070f(0x207));}catch(_0x3516cb){return console[_0x16070f(0x1f0)]('❌\x20[API\x20CATCH]\x20Error\x20creating\x20birthday\x20website:',_0x3516cb),{'success':![],'error':_0x3516cb[_0x16070f(0x1d6)]};}}async[a0_0x4688b1(0x20e)](_0x107bfe){const _0xb0381=a0_0x4688b1;try{const _0x4ab1c3=await fetch(this[_0xb0381(0x1de)]+_0xb0381(0x1d4)+_0x107bfe);if(!_0x4ab1c3['ok']){const _0x4d6232=await _0x4ab1c3['text']();throw new Error(_0xb0381(0x1d7)+_0x4ab1c3[_0xb0381(0x1d3)]);}const _0x4e47f3=await _0x4ab1c3[_0xb0381(0x1f4)]();if(_0x4e47f3[_0xb0381(0x200)])return{'success':!![],'data':_0x4e47f3[_0xb0381(0x20f)]};else{console['error'](_0xb0381(0x20c),_0x4e47f3[_0xb0381(0x1d6)]);throw new Error(_0x4e47f3[_0xb0381(0x1d6)]||_0xb0381(0x217));}}catch(_0x1fd1b0){return console['error']('❌\x20[API\x20GET\x20CATCH]\x20Error\x20fetching\x20birthday\x20website:',_0x1fd1b0),{'success':![],'error':_0x1fd1b0[_0xb0381(0x1d6)]};}}[a0_0x4688b1(0x1e3)](_0x42750b){const _0x508d6b=a0_0x4688b1,_0x44ab9a=window[_0x508d6b(0x1f9)][_0x508d6b(0x1ec)]+window[_0x508d6b(0x1f9)][_0x508d6b(0x1f7)],_0x2c2934=_0x44ab9a+'?websiteId='+_0x42750b;return _0x2c2934;}['getWebsiteIdFromURL'](){const _0x170687=a0_0x4688b1,_0x2ab727=new URLSearchParams(window[_0x170687(0x1f9)][_0x170687(0x1ee)]),_0x2a52d2=_0x2ab727['get'](_0x170687(0x1da));return _0x2a52d2;}[a0_0x4688b1(0x1fe)](){const _0x1835ca=a0_0x4688b1,_0x2cd1e1=this['currentWebsiteId']||localStorage[_0x1835ca(0x218)](_0x1835ca(0x1f6));return _0x2cd1e1;}[a0_0x4688b1(0x215)](){const _0x508160=a0_0x4688b1;localStorage[_0x508160(0x1d5)](_0x508160(0x1f6)),this[_0x508160(0x211)]=null;}}const birthdayAPI=new BirthdayAPI();window[a0_0x4688b1(0x21a)]=birthdayAPI;